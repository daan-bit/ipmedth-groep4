import{r as _,j as s,a as e,R as y,d as P,F as G}from"./app.b6cd464c.js";import{H as j}from"./GroupModel.8b0e4ae9.js";import{S as D}from"./StackedBarChart.70bacb14.js";/* empty css               */import{R as z}from"./ResponsiveNavLink.72ce952a.js";function E(t){const[c,u]=_.exports.useState(),[r,m]=_.exports.useState(),[h,p]=_.exports.useState(),[g,d]=_.exports.useState(),[k,a]=_.exports.useState();let o=[];const[S,M]=_.exports.useState([[0],[0],[0],[0],[0]]),[v,A]=_.exports.useState([[0],[0],[0],[0],[0]]),[w,C]=_.exports.useState([[0],[0],[0],[0],[0]]);function N(){M([[0],[0],[0],[0],[0]]),A([[0],[0],[0],[0],[0]]),C([[0],[0],[0],[0],[0]]);for(let n=0;n<t.allResults.length;n++){let i=t.allResults[n];for(let l=0;l<t.assignments.length;l++){let f=t.assignments[l].id-1;i[l]==null?R(f,0):t.assignments[l].id==i[l].assignment_id&&(o.push(i[l].assignment_id),R(f,i[l].status))}}}function R(n,i){i==1?S[n][0]+=1:i==-1?v[n][0]+=1:i==0&&(w[n][0]+=1)}function $(){u(Math.round(o.reduce((n,i)=>n+i,0)/o.length)),m(Math.round(F(o))),p(O(o)),d(Math.min.apply(Math,o)),a(Math.max.apply(Math,o))}function F(n){if(n.length==0)return;n.sort((f,x)=>f-x);const i=Math.floor(n.length/2);return n.length%2===1?n[i]:(n[i-1]+n[i])/2}function O(n){const i={};let l=0,f=0;for(let x=0;x<n.length;x++){const b=n[x];i[b]?i[b]++:i[b]=1,f<i[b]&&(l=b,f=i[b])}return l}return s("article",{className:"OverviewPerGroupPage",children:[s("section",{className:"OverviewPerGroupPage__statisticContainer",children:[s("section",{className:"statisticContainer__statistic",children:[e("section",{className:"statistic__titleContainer",children:e("h3",{className:"bold",children:"Gemiddelde"})}),e("section",{className:"statistic__contentContainer",children:e("h3",{children:c})})]}),s("section",{className:"statisticContainer__statistic",children:[e("section",{className:"statistic__titleContainer",children:e("h3",{className:"bold",children:"Mediaan"})}),e("section",{className:"statistic__contentContainer",children:e("h3",{children:r})})]}),s("section",{className:"statisticContainer__statistic",children:[e("section",{className:"statistic__titleContainer",children:e("h3",{className:"bold",children:"Modus"})}),e("section",{className:"statistic__contentContainer",children:e("h3",{children:h})})]}),s("section",{className:"statisticContainer__statistic",children:[e("section",{className:"statistic__titleContainer",children:e("h3",{className:"bold",children:"Min / Max"})}),e("section",{className:"statistic__contentContainer",children:s("h3",{children:[g," / ",k]})})]})]}),e("section",{className:"OverviewPerGroupPage__chartContainer",children:e(D,{refreshData:N,calculateStatistics:$,rightArray:S,wrongArray:v,unFinishedArray:w,Assignments:t.assignments})})]})}function L({closeModel:t,group_id:c}){const u=y.useRef(),[r,m]=y.useState(!1),h=()=>{const g=new FormData(u.current);return Object.fromEntries(g)},p=g=>{g.preventDefault();let{username:d}=h();if(d=d.trim(),m(!1),d===""||d===null||d===void 0||d.length<3){m("Dit veld mag niet leeg zijn of minder dan 3 karakters bevatten");return}P.Inertia.post(`/docent/overzicht/${c}/${d}`),t()};return s("div",{className:"group__modal",children:[e("div",{className:"group__modal__overlay",onClick:t}),s("div",{className:"group__modal__content",children:[s("div",{className:"group__modal__header",children:[e("h2",{className:"group__modal__title",children:"Nieuwe Leerling"}),e("button",{className:"group__modal__closeButton",onClick:t,children:"X"})]}),e("div",{className:"group__modal__body",children:e("form",{className:"group__modal__form",name:"groupModelForm",ref:u,children:s("div",{className:"group__modal__form__group",children:[e("label",{className:"group__modal__form__label",htmlFor:"username",children:"Gebruikersnaam"}),e("input",{className:`group__modal__form__input ${r&&"invalid"}`,type:"text",name:"username",id:"username",placeholder:"Gebuikersnaam voor de leerling"}),r&&e("div",{className:"group__modal__form__error",children:e("p",{children:r})})]})})}),e("div",{className:"group__modal__footer",children:e("button",{className:"group__modal__submit button-primary",onClick:p,as:"button",children:"Leerling toevoegen"})})]})]})}function B(t){var k;const[c,u]=_.exports.useState(!1);let r=t.allResults,m=t.students,h=t.assignments.length,p=[];for(let a=0;a<m.length;a++){let o=m[a],S={good:0,bad:0,unfinished:h};for(let M=0;M<r.length;M++){let v=r[M];if(o.id===((k=v[0])==null?void 0:k.student_id)){let A=0,w=0,C=h;for(let N=0;N<v.length;N++)v[N].status===1?(A++,C--):v[N].status===-1&&(w++,C--);S={good:A,bad:w,unfinished:C}}}p.push({id:o.id,first_name:o.first_name,results:S})}const g=()=>{u(!0)};return s(G,{children:[c?e(L,{closeModel:()=>{u(!1)},group_id:t.group.id}):null,e("section",{className:"student__table__header",children:e("button",{className:"button button-primary",onClick:g,children:"Voeg leerling toe"})}),s("article",{className:"student__table__container",children:[s("ul",{className:"student__table__row student__table__heading",children:[e("li",{children:"\u200E"}),e("li",{children:e("p",{children:"Leerling"})}),e("li",{children:e("p",{children:"Voortgang"})}),e("li",{children:"\u200E"})]}),e("ul",{className:"student__table",children:p.map(a=>s("li",{className:"student__table__row",children:[e("div",{children:e("figure",{className:"student__item__figure",children:e("img",{className:"student__item__figure__picture",src:`https://avatars.dicebear.com/api/bottts/${a.id}.svg`,alt:`Avatar van ${a.first_name}`})})}),e("p",{className:"student__item__name",children:a.first_name}),s("div",{className:"progress__container",children:[e("div",{className:"progress__bar",children:e("div",{className:"progress__bar__progress",style:{width:`${a.results.good/h*100}%`}})}),s("p",{className:"progress__text",children:[a.results.good," / ",h]})]}),e("div",{})]},a.id))})]})]})}function T(t){const[c,u]=_.exports.useState("statistieken");function r(m){u(m)}return s(G,{children:[e(j,{first_name:t.employee.first_name}),s("section",{className:"group__overview__container",children:[s("div",{className:"group__overview__container-row",children:[e("div",{className:"group__overview__button__container",children:e(z,{as:"button",href:route("docent.overzicht"),className:"button-primary group__overview__backButton",children:"Terug"})}),s("h1",{className:"group__overview__title",children:["Overzicht ",t.group.school_group]})]}),s("div",{className:"group__overview__menu",children:[e("button",{onClick:()=>r("statistieken"),className:`group__overview__menuItem ${c=="statistieken"?"active":""}`,children:"Groep statistieken"}),e("button",{onClick:()=>r("leerlingen"),className:`group__overview__menuItem ${c=="leerlingen"?"active":""}`,children:"Overzicht leerlingen"})]})]}),c=="statistieken"&&e(E,{allResults:t.allResults,assignments:t.assignments}),c=="leerlingen"&&e(B,{group:t.group,students:t.students,allResults:t.allResults,assignments:t.assignments})]})}export{T as default};
