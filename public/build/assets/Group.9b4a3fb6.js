import{r as d,j as s,a as e,R,d as G,F as $}from"./app.21369ce3.js";import{H as j}from"./GroupModel.01fe9aa7.js";import{S as z}from"./StackedBarChart.0f2d6d92.js";/* empty css               */import{R as D}from"./ResponsiveNavLink.16f7bc9d.js";function E(t){const[c,_]=d.exports.useState(),[r,u]=d.exports.useState(),[m,N]=d.exports.useState(),[h,o]=d.exports.useState(),[A,k]=d.exports.useState();let n=[];const[g,x]=d.exports.useState([[0],[0],[0],[0],[0]]),[p,b]=d.exports.useState([[0],[0],[0],[0],[0]]),[M,y]=d.exports.useState([[0],[0],[0],[0],[0]]);function w(){x([[0],[0],[0],[0],[0]]),b([[0],[0],[0],[0],[0]]),y([[0],[0],[0],[0],[0]]);for(let i=0;i<t.allResults.length;i++){let a=t.allResults[i];for(let l=0;l<t.assignments.length;l++){let f=t.assignments[l].id-1;a[l]==null?v(f,0):t.assignments[l].id==a[l].assignment_id&&(n.push(a[l].assignment_id),v(f,a[l].status))}}}function v(i,a){a==1?g[i][0]+=1:a==-1?p[i][0]+=1:a==0&&(M[i][0]+=1)}function F(){_(Math.round(n.reduce((i,a)=>i+a,0)/n.length)),u(Math.round(O(n))),N(P(n)),o(Math.min.apply(Math,n)),k(Math.max.apply(Math,n))}function O(i){if(i.length==0)return;i.sort((f,C)=>f-C);const a=Math.floor(i.length/2);return i.length%2===1?i[a]:(i[a-1]+i[a])/2}function P(i){const a={};let l=0,f=0;for(let C=0;C<i.length;C++){const S=i[C];a[S]?a[S]++:a[S]=1,f<a[S]&&(l=S,f=a[S])}return l}return s("article",{className:"OverviewPerGroupPage",children:[s("section",{className:"OverviewPerGroupPage__statisticContainer",children:[s("section",{className:"statisticContainer__statistic",children:[e("section",{className:"statistic__titleContainer",children:e("h3",{className:"bold",children:"Gemiddelde"})}),e("section",{className:"statistic__contentContainer",children:e("h3",{children:c})})]}),s("section",{className:"statisticContainer__statistic",children:[e("section",{className:"statistic__titleContainer",children:e("h3",{className:"bold",children:"Mediaan"})}),e("section",{className:"statistic__contentContainer",children:e("h3",{children:r})})]}),s("section",{className:"statisticContainer__statistic",children:[e("section",{className:"statistic__titleContainer",children:e("h3",{className:"bold",children:"Modus"})}),e("section",{className:"statistic__contentContainer",children:e("h3",{children:m})})]}),s("section",{className:"statisticContainer__statistic",children:[e("section",{className:"statistic__titleContainer",children:e("h3",{className:"bold",children:"Min / Max"})}),e("section",{className:"statistic__contentContainer",children:s("h3",{children:[h," / ",A]})})]})]}),e("section",{className:"OverviewPerGroupPage__chartContainer",children:e(z,{refreshData:w,calculateStatistics:F,rightArray:g,wrongArray:p,unFinishedArray:M,Assignments:t.assignments})})]})}function L({closeModel:t,group_id:c}){const _=R.useRef(),[r,u]=R.useState(!1),m=()=>{const h=new FormData(_.current);return Object.fromEntries(h)},N=h=>{h.preventDefault();let{username:o}=m();if(o=o.trim(),u(!1),o===""||o===null||o===void 0||o.length<3){u("Dit veld mag niet leeg zijn of minder dan 3 karakters bevatten");return}G.Inertia.post(`/docent/overzicht/${c}/${o}`),t()};return s("div",{className:"group__modal",children:[e("div",{className:"group__modal__overlay",onClick:t}),s("div",{className:"group__modal__content",children:[s("div",{className:"group__modal__header",children:[e("h2",{className:"group__modal__title",children:"Nieuwe Leerling"}),e("button",{className:"group__modal__closeButton",onClick:t,children:"X"})]}),e("div",{className:"group__modal__body",children:e("form",{className:"group__modal__form",name:"groupModelForm",ref:_,children:s("div",{className:"group__modal__form__group",children:[e("label",{className:"group__modal__form__label",htmlFor:"username",children:"Gebruikersnaam"}),e("input",{className:`group__modal__form__input ${r&&"invalid"}`,type:"text",name:"username",id:"username",placeholder:"Gebuikersnaam voor de leerling"}),r&&e("div",{className:"group__modal__form__error",children:e("p",{children:r})})]})})}),e("div",{className:"group__modal__footer",children:e("button",{className:"group__modal__submit button-primary",onClick:N,as:"button",children:"Leerling toevoegen"})})]})]})}function B(t){var k;console.log(t);const[c,_]=d.exports.useState(!1);let r=t.allResults,u=t.students,m=t.assignments.length,N=[];for(let n=0;n<u.length;n++){let g=u[n],x={good:0,bad:0,unfinished:m};for(let p=0;p<r.length;p++){let b=r[p];if(g.id===((k=b[0])==null?void 0:k.student_id)){let M=0,y=0,w=m;for(let v=0;v<b.length;v++)b[v].status===1?(M++,w--):b[v].status===-1&&(y++,w--);x={good:M,bad:y,unfinished:w}}}N.push({id:g.id,first_name:g.first_name,results:x,user_id:g.user_id})}const h=()=>{_(!0)},o=()=>{_(!1)},A=n=>{G.Inertia.delete(`/docent/overzicht/${t.group.id}/${n}`)};return s($,{children:[c?e(L,{closeModel:o,group_id:t.group.id}):null,e("section",{className:"student__table__header",children:e("button",{className:"button button-primary",onClick:h,children:"Voeg leerling toe"})}),s("article",{className:"student__table__container",children:[s("ul",{className:"student__table__row student__table__heading",children:[e("li",{children:"\u200E"}),e("li",{children:e("p",{children:"Leerling"})}),e("li",{children:e("p",{children:"Voortgang"})}),e("li",{children:"\u200E"})]}),e("ul",{className:"student__table",children:N.map(n=>s("li",{className:"student__table__row",children:[e("div",{children:e("figure",{className:"student__item__figure",children:e("img",{className:"student__item__figure__picture",src:`https://avatars.dicebear.com/api/bottts/${n.id}.svg`,alt:`Avatar van ${n.first_name}`})})}),e("p",{className:"student__item__name",children:n.first_name}),s("div",{className:"progress__container",children:[e("div",{className:"progress__bar",children:e("div",{className:"progress__bar__progress",style:{width:`${n.results.good/m*100}%`}})}),s("p",{className:"progress__text",children:[n.results.good," / ",m]})]}),e("div",{}),e("button",{className:"student__item__button",onClick:()=>A(n.user_id),children:e("span",{className:"material-symbols-outlined",children:"delete"})})]},n.id))})]})]})}function T(t){const[c,_]=d.exports.useState("statistieken");function r(u){_(u)}return s($,{children:[e(j,{first_name:t.employee.first_name}),s("section",{className:"group__overview__container",children:[s("div",{className:"group__overview__container-row",children:[e("div",{className:"group__overview__button__container",children:e(D,{as:"button",href:route("docent.overzicht"),className:"button-primary group__overview__backButton",children:"Terug"})}),s("h1",{className:"group__overview__title",children:["Overzicht ",t.group.school_group]})]}),s("div",{className:"group__overview__menu",children:[e("button",{onClick:()=>r("statistieken"),className:`group__overview__menuItem ${c=="statistieken"?"active":""}`,children:"Groep statistieken"}),e("button",{onClick:()=>r("leerlingen"),className:`group__overview__menuItem ${c=="leerlingen"?"active":""}`,children:"Overzicht leerlingen"})]})]}),c=="statistieken"&&e(E,{allResults:t.allResults,assignments:t.assignments}),c=="leerlingen"&&e(B,{group:t.group,students:t.students,allResults:t.allResults,assignments:t.assignments})]})}export{T as default};
