import{r,j as s,a as e,R as P,d as z,F as E}from"./app.81bb8d2d.js";import{H as U}from"./GroupModel.36e6fcc8.js";import{S as L}from"./StackedBarChart.b9508351.js";/* empty css               */import{M as I}from"./Modal.788b00cf.js";import{R as T}from"./ResponsiveNavLink.1d13fd40.js";import"./adminSettings.3ff4c90c.js";import"./PrimaryButton.22deef5d.js";import"./TextInput.d0d15259.js";/* empty css              */import"./InputError.0bfe9544.js";function W(a){const[_,o]=r.exports.useState(),[m,u]=r.exports.useState(),[S,k]=r.exports.useState(),[p,h]=r.exports.useState(),[y,f]=r.exports.useState();let g=[];const[M,x]=r.exports.useState([[0],[0],[0],[0],[0]]),[C,w]=r.exports.useState([[0],[0],[0],[0],[0]]),[N,j]=r.exports.useState([[0],[0],[0],[0],[0]]);function D(){x([[0],[0],[0],[0],[0]]),w([[0],[0],[0],[0],[0]]),j([[0],[0],[0],[0],[0]]);for(let n=0;n<a.allResults.length;n++){let t=a.allResults[n];for(let i=0;i<a.assignments.length;i++){let l=a.assignments[i].id-1;t[i]==null?A(l,0):a.assignments[i].id==t[i].assignment_id&&(g.push(t[i].assignment_id),A(l,t[i].status))}}}function A(n,t){t==1?M[n][0]+=1:t==-1?C[n][0]+=1:t==0&&(N[n][0]+=1)}function G(){o(Math.round(g.reduce((n,t)=>n+t,0)/g.length)),u(Math.round(F(g))),k(O(g)),h(Math.min.apply(Math,g)),f(Math.max.apply(Math,g))}function F(n){if(n.length==0)return;n.sort((l,d)=>l-d);const t=Math.floor(n.length/2);return n.length%2===1?n[t]:(n[t-1]+n[t])/2}function O(n){const t={};let i=0,l=0;for(let d=0;d<n.length;d++){const c=n[d];t[c]?t[c]++:t[c]=1,l<t[c]&&(i=c,l=t[c])}return i}return s("article",{className:"OverviewPerGroupPage",children:[s("section",{className:"OverviewPerGroupPage__statisticContainer",children:[s("section",{className:"statisticContainer__statistic",children:[e("section",{className:"statistic__titleContainer",children:e("h3",{className:"bold",children:"Student is gemiddeld bij:"})}),e("section",{className:"statistic__contentContainer",children:s("h3",{children:["Opdracht ",_||"-"]})})]}),s("section",{className:"statisticContainer__statistic",children:[e("section",{className:"statistic__titleContainer",children:e("h3",{className:"bold",children:"Mediaan van voortgang:"})}),e("section",{className:"statistic__contentContainer",children:s("h3",{children:["Opdracht ",m||"-"]})})]}),s("section",{className:"statisticContainer__statistic",children:[e("section",{className:"statistic__titleContainer",children:e("h3",{className:"bold",children:"Min / Max"})}),e("section",{className:"statistic__contentContainer",children:s("h3",{children:["Opdracht ",p===1/0?"-":p," / ",y===-1/0?"-":y]})})]})]}),e("section",{className:"OverviewPerGroupPage__chartContainer",children:e(L,{refreshData:D,calculateStatistics:G,rightArray:M,wrongArray:C,unFinishedArray:N,Assignments:a.assignments})})]})}function B({closeModel:a,group_id:_}){const o=P.useRef(),[m,u]=P.useState(!1),S=()=>{const p=new FormData(o.current);return Object.fromEntries(p)},k=p=>{p.preventDefault();let{username:h}=S();if(h=h.trim(),u(!1),h===""||h===null||h===void 0||h.length<3){u("Dit veld mag niet leeg zijn of minder dan 3 karakters bevatten");return}z.Inertia.post(`/docent/overzicht/${_}/${h}`),a()};return s("div",{className:"group__modal",children:[e("div",{className:"group__modal__overlay",onClick:a}),s("div",{className:"group__modal__content",children:[s("div",{className:"group__modal__header",children:[e("h2",{className:"group__modal__title",children:"Nieuwe Leerling"}),e("button",{className:"group__modal__closeButton",onClick:a,children:"X"})]}),e("div",{className:"group__modal__body",children:e("form",{className:"group__modal__form",name:"groupModelForm",ref:o,children:s("div",{className:"group__modal__form__group",children:[e("label",{className:"group__modal__form__label",htmlFor:"username",children:"Gebruikersnaam"}),e("input",{className:`group__modal__form__input ${m&&"invalid"}`,type:"text",name:"username",id:"username",placeholder:"Gebuikersnaam voor de leerling"}),m&&e("div",{className:"group__modal__form__error",children:e("p",{children:m})}),e("button",{className:"group__modal__submit button-primary",onClick:k,as:"button",children:"Leerling toevoegen"})]})})})]})]})}function V(a){var n;const[_,o]=r.exports.useState(!1),[m,u]=r.exports.useState(!1),[S,k]=r.exports.useState(["",""]),[p,h]=r.exports.useState(""),[y,f]=r.exports.useState(!1),[g,M]=r.exports.useState("");let x=a.allResults,C=a.students,w=a.assignments.length,N=[];for(let t=0;t<C.length;t++){let i=C[t],l={good:0,bad:0,unfinished:w};for(let d=0;d<x.length;d++){let c=x[d];if(i.id===((n=c[0])==null?void 0:n.student_id)){let $=0,R=0,b=w;for(let v=0;v<c.length;v++)c[v].status===1?($++,b--):c[v].status===-1&&(R++,b--);l={good:$,bad:R,unfinished:b}}}N.push({id:i.id,first_name:i.first_name,results:l,user_id:i.user_id,password:i.password})}const j=()=>{o(!0)},D=()=>{o(!1)},A=t=>{z.Inertia.delete(`/docent/overzicht/${a.group.id}/${t}`),f(!1)},G=(t,i)=>{let l=t.split(/(?=[A-Z])/);k(l),u(!0),h(i)},F=t=>{z.Inertia.visit(`/docent/overzicht/${a.group.id}/${t}`)},O=()=>{let t="data:text/csv;charset=utf-8,";t+="Naam,Plaatje 1,Plaatje 2",t+=`
`,N.forEach(b=>{let v=b.password.split(/(?=[A-Z])/);t+=`${b.first_name},${v[0]},${v[1]}`,t+=`
`});let i=encodeURI(t),l=document.createElement("a");l.setAttribute("href",i);let d=new Date,c=d.getDate(),$=d.getMonth()+1,R=d.getFullYear();l.setAttribute("download",`wachtwoorden_${a.group.school_group.replace(/\s/g,"_")}_${c}-${$}-${R}.csv`),document.body.appendChild(l),l.click()};return s(E,{children:[_?e(B,{closeModel:D,group_id:a.group.id}):null,e(I,{content:e(P.Fragment,{children:s("div",{className:"viewpassword__modal",children:[e("button",{className:"viewpassword__close",onClick:()=>u(!1),children:e("span",{className:"material-symbols-outlined",children:"close"})}),s("h3",{className:"viewpassword__title",children:["Wachtwoord van ",p]}),s("div",{className:"viewpassword__password__wrapper",children:[s("p",{className:"viewpassword__password viewpassword__password--1",children:[e("span",{className:"password--bold",children:"Plaatje 1:"})," ",S[0]]}),s("p",{className:"viewpassword__password viewpassword__password--2",children:[e("span",{className:"password--bold",children:"Plaatje 2:"})," ",S[1]]})]})]})}),modelState:m,setModelState:u}),e(I,{content:e(P.Fragment,{children:e(E,{children:e("div",{className:"studentDelete__modal__content",children:s("div",{className:"group__modal__deleteConfirmation",children:[e("h2",{className:"group__modal__deleteTitle",children:"Weet je zeker dat je deze leerling wilt verwijderen?"}),s("div",{className:"group__modal__deleteConfirmation__buttons",children:[e("button",{className:"group__modal__deleteConfirmation__button group__modal__deleteConfirmation__button--cancel",onClick:()=>f(!1),children:"Annuleer"}),e("button",{className:"group__modal__deleteConfirmation__button group__modal__deleteConfirmation__button--confirm",onClick:()=>A(g),children:"Verwijder leerling"})]})]})})})}),modelState:y,setModelState:f}),s("section",{className:"student__table__header",children:[e("button",{className:"button button-primary",onClick:O,children:"Download wachtwoorden"}),e("button",{className:"button button-primary",onClick:j,children:"Voeg leerling toe"})]}),s("article",{className:"student__table__container",children:[s("ul",{className:"student__table__row student__table__heading",children:[e("li",{children:"\u200E"}),e("li",{children:e("p",{children:"Leerling"})}),e("li",{children:e("p",{children:"Voortgang"})}),e("li",{children:"\u200E"})]}),e("ul",{className:"student__table",children:N.map(t=>s("li",{className:"student__table__row",children:[e("div",{children:e("figure",{className:"student__item__figure",children:e("img",{className:"student__item__figure__picture",src:`https://avatars.dicebear.com/api/bottts/${t.id}.svg`,alt:`Avatar van ${t.first_name}`})})}),e("p",{className:"student__item__name",children:t.first_name}),s("div",{className:"progress__container",children:[e("div",{className:"progress__bar",children:e("div",{className:"progress__bar__progress",style:{width:`${t.results.good/w*100}%`}})}),s("p",{className:"progress__text",children:[t.results.good," / ",w]})]}),s("div",{className:"student__item__button__wrapper",children:[e("button",{className:"student__item__button student__item__button--password",onClick:()=>F(t.id),children:e("span",{className:"material-symbols-outlined",children:"visibility"})}),e("button",{className:"student__item__button student__item__button--password",onClick:()=>G(t.password,t.first_name),children:e("span",{className:"material-symbols-outlined",children:"password"})}),e("button",{className:"student__item__button student__item__button--delete",onClick:()=>{M(t.user_id),f(!0)},children:e("span",{className:"material-symbols-outlined",children:"delete"})})]})]},t.id))})]})]})}function ae(a){const[_,o]=r.exports.useState("statistieken");function m(u){o(u)}return a.students.length<1&&_=="statistieken"&&o("leerlingen"),r.exports.useEffect(()=>{switch(new URL(location.href).searchParams.get("overzicht")){case"statistieken":o("statistieken");break;case"leerlingen":o("leerlingen");break;default:o("statistieken");break}},[]),s(E,{children:[e(U,{first_name:a.employee.first_name}),s("section",{className:"group__overview__container",children:[s("div",{className:"group__overview__container-row",children:[e("div",{className:"group__overview__button__container",children:e(T,{as:"button",href:route("docent.overzicht"),className:"button-primary group__overview__backButton",children:"Terug"})}),s("h1",{className:"group__overview__title",children:["Overzicht ",a.group.school_group]})]}),a.students.length>0&&s("div",{className:"group__overview__menu",children:[e("button",{onClick:()=>m("statistieken"),className:`group__overview__menuItem ${_=="statistieken"?"active":""}`,children:"Groep statistieken"}),e("button",{onClick:()=>m("leerlingen"),className:`group__overview__menuItem ${_=="leerlingen"?"active":""}`,children:"Overzicht leerlingen"})]})]}),_=="statistieken"&&e(W,{allResults:a.allResults,assignments:a.assignments}),_=="leerlingen"&&e(V,{group:a.group,students:a.students,allResults:a.allResults,assignments:a.assignments})]})}export{ae as default};
