import{R as _,j as t,a as r,d as w,F as A}from"./app.d3061d20.js";import{R as E}from"./ResponsiveNavLink.9baee7c1.js";import{H as M}from"./GroupModel.f3301a1d.js";/* empty css               */import"./adminSettings.2e4da86d.js";import"./PrimaryButton.2ec3d75b.js";import"./TextInput.b7c91825.js";/* empty css              */import"./InputError.0425a657.js";function Y({closeModel:l,school_id:N,employee_id:g}){const u=_.useRef(),[n,a]=_.useState(!1),[i,c]=_.useState(!1),d=()=>{const o=new FormData(u.current);return Object.fromEntries(o)},m=o=>{o.preventDefault();const{school_year:s,school_group:p}=d();a(!1),c(!1);const f=s.match(/^\d{4}-\d{4}$/),b=p.match(/^Groep \d{1,2}[a-zA-Z]{0,2}$/);f||a("Het schooljaar moet er als volgt uitzien: 2022-2023"),b||c("De groep moet er als volgt uitzien: Groep 3A"),f&&b&&(w.Inertia.post("/docent/groep",{school_year:s,school_group:p,school_id:N,employee_id:g}),l())};let h="";const G=o=>(o.length<=4&&(o=o.replace(/\D/g,"")),o.length==8&&o.length<h.length?"":(o.length>4&&o.length<9&&(o=o.slice(0,4)),o.length>9&&(o=o.slice(0,9)),o.length==4&&o.length>h.length&&(o=`${o}-${+o+1}`),o.match(/^\d{4}-\d{4}$/)&&a(!1),h=o,o)),y=o=>((o.length<6||o.slice(0,6)!="Groep ")&&(o="Groep "+o.slice(6)),o.length>9&&(o=o.slice(0,9)),o.length>6&&!/\d/.test(o[6])&&(o=o.slice(0,6)+o.slice(7)),o.length>7&&!/[a-zA-Z]/.test(o[7])&&(o=o.slice(0,7)+o.slice(8)),o.length>8&&!/[a-zA-Z]/.test(o[8])&&(o=o.slice(0,8)),o.match(/^Groep \d{1,2}[a-zA-Z]{0,2}$/)&&c(!1),o);return t("div",{className:"group__modal",children:[r("div",{className:"group__modal__overlay",onClick:l}),t("div",{className:"group__modal__content",children:[t("div",{className:"group__modal__header",children:[r("h2",{className:"group__modal__title",children:"Nieuwe groep"}),r("button",{className:"group__modal__closeButton",onClick:l,children:"X"})]}),r("div",{className:"group__modal__body",children:t("form",{className:"group__modal__form",name:"groupModelForm",ref:u,children:[t("div",{className:"group__modal__form__group",children:[r("label",{className:"group__modal__form__label",htmlFor:"school_year",children:"Schooljaar"}),r("input",{className:`group__modal__form__input ${n&&"invalid"}`,type:"text",name:"school_year",id:"school_year",onChange:o=>{o.target.value=G(o.target.value)},placeholder:"Schooljaar"}),n&&r("div",{className:"group__modal__form__error",children:r("p",{children:n})})]}),t("div",{className:"group__modal__form__group",children:[r("label",{className:"group__modal__form__label",htmlFor:"school_group",children:"Groep"}),r("input",{className:`group__modal__form__input ${i&&"invalid"}`,type:"text",name:"school_group",id:"school_group",placeholder:"Groep",onChange:o=>{o.target.value=y(o.target.value)},onClick:o=>{o.target.value.length==0&&(o.target.value="Groep ")},onFocus:o=>{o.target.value.length==0&&(o.target.value="Groep ")},onBlur:o=>{o.target.value=="Groep "&&(o.target.value="")}}),i&&r("div",{className:"group__modal__form__error",children:r("p",{children:i})})]})]})}),r("div",{className:"group__modal__footer",children:r("button",{className:"group__modal__submit button-primary",onClick:m,as:"button",children:"Toevoegen"})})]})]})}function x({closeModel:l,school_id:N,school_year:g,school_group:u,group_id:n}){const a=_.useRef(),[i,c]=_.useState(!1),[d,m]=_.useState(!1),[h,G]=_.useState(g),[y,o]=_.useState(u),[s,p]=_.useState(!1),f=()=>{const e=new FormData(a.current);return Object.fromEntries(e)},b=e=>{e.preventDefault();const{school_year:S,school_group:k}=f();c(!1),m(!1);const j=S.match(/^\d{4}-\d{4}$/),D=k.match(/^Groep \d{1,2}[a-zA-Z]{0,2}$/);j||c("Het schooljaar moet er als volgt uitzien: 2022-2023"),D||m("De groep moet er als volgt uitzien: Groep 3A"),j&&D&&(w.Inertia.put(`/docent/groep/${n}`,{school_year:S,school_group:k,school_id:N}),l())},$=e=>{e.preventDefault(),w.Inertia.delete(`/docent/groep/${n}`),l()};let C="";const z=e=>(e.length<=4&&(e=e.replace(/\D/g,"")),e.length==8&&e.length<C.length?"":(e.length>4&&e.length<9&&(e=e.slice(0,4)),e.length>9&&(e=e.slice(0,9)),e.length==4&&e.length>C.length&&(e=`${e}-${+e+1}`),e.match(/^\d{4}-\d{4}$/)&&c(!1),C=e,e)),F=e=>((e.length<6||e.slice(0,6)!="Groep ")&&(e="Groep "+e.slice(6)),e.length>9&&(e=e.slice(0,9)),e.length>6&&!/\d/.test(e[6])&&(e=e.slice(0,6)+e.slice(7)),e.length>7&&!/[a-zA-Z]/.test(e[7])&&(e=e.slice(0,7)+e.slice(8)),e.length>8&&!/[a-zA-Z]/.test(e[8])&&(e=e.slice(0,8)),e.match(/^Groep \d{1,2}[a-zA-Z]{0,2}$/)&&m(!1),e);return t("div",{className:"group__modal",children:[r("div",{className:"group__modal__overlay",onClick:l}),r("div",{className:"group__modal__content",children:s?t("div",{className:"group__modal__deleteConfirmation",children:[r("h2",{className:"group__modal__deleteTitle",children:"Weet je zeker dat je deze groep wilt verwijderen?"}),t("div",{className:"group__modal__deleteConfirmation__buttons",children:[r("button",{className:"group__modal__deleteConfirmation__button group__modal__deleteConfirmation__button--cancel",onClick:()=>p(!1),children:"Annuleer"}),r("button",{className:"group__modal__deleteConfirmation__button group__modal__deleteConfirmation__button--confirm",onClick:$,children:"Verwijder groep"})]})]}):t(A,{children:[t("div",{className:"group__modal__header",children:[r("h2",{className:"group__modal__title",children:"Wijzig groep"}),r("button",{className:"group__modal__closeButton",onClick:l,children:"X"})]}),r("div",{className:"group__modal__body",children:t("form",{className:"group__modal__form",name:"groupModelForm",ref:a,children:[t("div",{className:"group__modal__form__group",children:[r("label",{className:"group__modal__form__label",htmlFor:"school_year",children:"Schooljaar"}),r("input",{className:`group__modal__form__input ${i&&"invalid"}`,type:"text",name:"school_year",id:"school_year",onChange:e=>{G(z(e.target.value))},placeholder:new Date().getFullYear()+"-"+(new Date().getFullYear()+1),value:h}),i&&r("div",{className:"group__modal__form__error",children:r("p",{children:i})})]}),t("div",{className:"group__modal__form__group",children:[r("label",{className:"group__modal__form__label",htmlFor:"school_group",children:"Groep"}),r("input",{className:`group__modal__form__input ${d&&"invalid"}`,type:"text",name:"school_group",id:"school_group",placeholder:"Groep 3A",onChange:e=>{o(F(e.target.value))},onClick:e=>{e.target.value.length==0&&(e.target.value="Groep ")},onFocus:e=>{e.target.value.length==0&&(e.target.value="Groep ")},onBlur:e=>{e.target.value=="Groep "&&(e.target.value="")},value:y}),d&&r("div",{className:"group__modal__form__error",children:r("p",{children:d})})]})]})}),t("div",{className:"group__modal__footer",children:[r("button",{className:"group__modal__delete button-secondary",onClick:()=>p(!0),as:"button",children:"Verwijder groep"}),r("button",{className:"group__modal__submit button-primary",onClick:b,as:"button",children:"Wijzig groep"})]})]})})]})}function X(l){const[N,g]=_.useState(!1),[u,n]=_.useState(!1),[a,i]=_.useState(null),c=Object.keys(l.groups).map(o=>l.groups[o]);let d=(o,s)=>{if(o.school_year>s.school_year)return-1;if(o.school_year<s.school_year)return 1;if(o.school_year==s.school_year){if(o.school_group>s.school_group)return-1;if(o.school_group<s.school_group)return 1}return 0};c.sort(d);const m=o=>{o.preventDefault(),g(!0)},h=()=>{g(!1)},G=(o,s,p,f)=>{i({school_id:o,school_year:s,school_group:p,group_id:f}),n(!0)},y=()=>{n(!1)};return t("section",{className:"teacherOverview",children:[r(M,{first_name:l.employee.first_name}),t("div",{className:"page__title__wrapper",children:[r("h1",{className:"page__title",children:"Overzicht"}),r("button",{className:"addGroup__button",onClick:o=>m(o),children:"+ Nieuwe groep"})]}),N?r(Y,{closeModel:h,school_id:l.employee.school_id,employee_id:l.employee.id}):null,r("section",{className:"groups__overview",children:l.groups.length===0?r("div",{className:"groups__overview__noGroups",children:r("p",{className:"groups__overview__noGroups__text",children:"Je hebt nog geen groepen, voeg er een toe!"})}):t("div",{className:"groups__overview__groups",children:[u?r(x,{closeModel:y,school_id:a.school_id,school_year:a.school_year,school_group:a.school_group,group_id:a.group_id}):null,c.map(o=>t("div",{className:"group__card",children:[t("div",{className:"group__card__header",children:[r("h2",{className:"group__card__title",children:o.school_group}),r("p",{className:"group__card__subtitle",children:o.school_year}),r("button",{className:"group__card__edit__button",onClick:()=>G(l.employee.school_id,o.school_year,o.school_group,o.id),children:r("span",{className:"material-symbols-outlined",children:"more_vert"})}),r("div",{className:"group__card__line"})]}),r("div",{className:"group__card__body",children:t("p",{className:"group__card__body__students__text",children:[o.student_count," ",o.student_count===1?"leerling":"leerlingen"]})}),r("div",{className:"group__card__footer",children:r(E,{method:"get",className:"group__card__footer__link button-primary",href:`/docent/overzicht/${o.id}`,as:"button",children:"Bekijk groep"})})]},o.id))]})})]})}export{X as default};
