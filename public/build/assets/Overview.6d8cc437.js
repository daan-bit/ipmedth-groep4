import{R as a,j as t,a as r,d as S}from"./app.1c6f69ab.js";import{R as A}from"./ResponsiveNavLink.05828d5a.js";import{H as F}from"./GroupModel.9b4d7df6.js";/* empty css               */import"./adminSettings.e8138818.js";import"./PrimaryButton.71e07542.js";import"./TextInput.5f482d34.js";/* empty css              */import"./InputError.d07709d6.js";function j({closeModel:l,school_id:G,employee_id:p}){const g=a.useRef(),[i,_]=a.useState(!1),[n,c]=a.useState(!1),d=()=>{const o=new FormData(g.current);return Object.fromEntries(o)},h=o=>{o.preventDefault();const{school_year:s,school_group:u}=d();_(!1),c(!1);const f=s.match(/^\d{4}-\d{4}$/),N=u.match(/^Groep \d{1,2}[a-zA-Z]{0,2}$/);f||_("Het schooljaar moet er als volgt uitzien: 2022-2023"),N||c("De groep moet er als volgt uitzien: Groep 3A"),f&&N&&(S.Inertia.post("/docent/groep",{school_year:s,school_group:u,school_id:G,employee_id:p}),l())};let m="";const y=o=>(o.length<=4&&(o=o.replace(/\D/g,"")),o.length==8&&o.length<m.length?"":(o.length>4&&o.length<9&&(o=o.slice(0,4)),o.length>9&&(o=o.slice(0,9)),o.length==4&&o.length>m.length&&(o=`${o}-${+o+1}`),o.match(/^\d{4}-\d{4}$/)&&_(!1),m=o,o)),b=o=>((o.length<6||o.slice(0,6)!="Groep ")&&(o="Groep "+o.slice(6)),o.length>9&&(o=o.slice(0,9)),o.length>6&&!/\d/.test(o[6])&&(o=o.slice(0,6)+o.slice(7)),o.length>7&&!/[a-zA-Z]/.test(o[7])&&(o=o.slice(0,7)+o.slice(8)),o.length>8&&!/[a-zA-Z]/.test(o[8])&&(o=o.slice(0,8)),o.match(/^Groep \d{1,2}[a-zA-Z]{0,2}$/)&&c(!1),o);return t("div",{className:"group__modal",children:[r("div",{className:"group__modal__overlay",onClick:l}),t("div",{className:"group__modal__content",children:[t("div",{className:"group__modal__header",children:[r("h2",{className:"group__modal__title",children:"Nieuwe groep"}),r("button",{className:"group__modal__closeButton",onClick:l,children:"X"})]}),r("div",{className:"group__modal__body",children:t("form",{className:"group__modal__form",name:"groupModelForm",ref:g,children:[t("div",{className:"group__modal__form__group",children:[r("label",{className:"group__modal__form__label",htmlFor:"school_year",children:"Schooljaar"}),r("input",{className:`group__modal__form__input ${i&&"invalid"}`,type:"text",name:"school_year",id:"school_year",onChange:o=>{o.target.value=y(o.target.value)},placeholder:"Schooljaar"}),i&&r("div",{className:"group__modal__form__error",children:r("p",{children:i})})]}),t("div",{className:"group__modal__form__group",children:[r("label",{className:"group__modal__form__label",htmlFor:"school_group",children:"Groep"}),r("input",{className:`group__modal__form__input ${n&&"invalid"}`,type:"text",name:"school_group",id:"school_group",placeholder:"Groep",onChange:o=>{o.target.value=b(o.target.value)},onClick:o=>{o.target.value.length==0&&(o.target.value="Groep ")},onFocus:o=>{o.target.value.length==0&&(o.target.value="Groep ")},onBlur:o=>{o.target.value=="Groep "&&(o.target.value="")}}),n&&r("div",{className:"group__modal__form__error",children:r("p",{children:n})})]})]})}),r("div",{className:"group__modal__footer",children:r("button",{className:"group__modal__submit button-primary",onClick:h,as:"button",children:"Toevoegen"})})]})]})}function C({closeModel:l,school_id:G,school_year:p,school_group:g,group_id:i}){const _=a.useRef(),[n,c]=a.useState(!1),[d,h]=a.useState(!1),[m,y]=a.useState(p),[b,o]=a.useState(g),s=()=>{const e=new FormData(_.current);return Object.fromEntries(e)},u=e=>{e.preventDefault();const{school_year:k,school_group:w}=s();c(!1),h(!1);const $=k.match(/^\d{4}-\d{4}$/),D=w.match(/^Groep \d{1,2}[a-zA-Z]{0,2}$/);$||c("Het schooljaar moet er als volgt uitzien: 2022-2023"),D||h("De groep moet er als volgt uitzien: Groep 3A"),$&&D&&(S.Inertia.put(`/docent/groep/${i}`,{school_year:k,school_group:w,school_id:G}),l())},f=e=>{e.preventDefault(),S.Inertia.delete(`/docent/groep/${i}`),l()};let N="";const E=e=>(e.length<=4&&(e=e.replace(/\D/g,"")),e.length==8&&e.length<N.length?"":(e.length>4&&e.length<9&&(e=e.slice(0,4)),e.length>9&&(e=e.slice(0,9)),e.length==4&&e.length>N.length&&(e=`${e}-${+e+1}`),e.match(/^\d{4}-\d{4}$/)&&c(!1),N=e,e)),z=e=>((e.length<6||e.slice(0,6)!="Groep ")&&(e="Groep "+e.slice(6)),e.length>9&&(e=e.slice(0,9)),e.length>6&&!/\d/.test(e[6])&&(e=e.slice(0,6)+e.slice(7)),e.length>7&&!/[a-zA-Z]/.test(e[7])&&(e=e.slice(0,7)+e.slice(8)),e.length>8&&!/[a-zA-Z]/.test(e[8])&&(e=e.slice(0,8)),e.match(/^Groep \d{1,2}[a-zA-Z]{0,2}$/)&&h(!1),e);return t("div",{className:"group__modal",children:[r("div",{className:"group__modal__overlay",onClick:l}),t("div",{className:"group__modal__content",children:[t("div",{className:"group__modal__header",children:[r("h2",{className:"group__modal__title",children:"Wijzig groep"}),r("button",{className:"group__modal__closeButton",onClick:l,children:"X"})]}),r("div",{className:"group__modal__body",children:t("form",{className:"group__modal__form",name:"groupModelForm",ref:_,children:[t("div",{className:"group__modal__form__group",children:[r("label",{className:"group__modal__form__label",htmlFor:"school_year",children:"Schooljaar"}),r("input",{className:`group__modal__form__input ${n&&"invalid"}`,type:"text",name:"school_year",id:"school_year",onChange:e=>{y(E(e.target.value))},placeholder:new Date().getFullYear()+"-"+(new Date().getFullYear()+1),value:m}),n&&r("div",{className:"group__modal__form__error",children:r("p",{children:n})})]}),t("div",{className:"group__modal__form__group",children:[r("label",{className:"group__modal__form__label",htmlFor:"school_group",children:"Groep"}),r("input",{className:`group__modal__form__input ${d&&"invalid"}`,type:"text",name:"school_group",id:"school_group",placeholder:"Groep 3A",onChange:e=>{o(z(e.target.value))},onClick:e=>{e.target.value.length==0&&(e.target.value="Groep ")},onFocus:e=>{e.target.value.length==0&&(e.target.value="Groep ")},onBlur:e=>{e.target.value=="Groep "&&(e.target.value="")},value:b}),d&&r("div",{className:"group__modal__form__error",children:r("p",{children:d})})]})]})}),t("div",{className:"group__modal__footer",children:[r("button",{className:"group__modal__delete button-secondary",onClick:f,as:"button",children:"Verwijder groep"}),r("button",{className:"group__modal__submit button-primary",onClick:u,as:"button",children:"Wijzig groep"})]})]})]})}function H(l){const[G,p]=a.useState(!1),[g,i]=a.useState(!1),[_,n]=a.useState(null),c=Object.keys(l.groups).map(o=>l.groups[o]);let d=(o,s)=>{if(o.school_year>s.school_year)return-1;if(o.school_year<s.school_year)return 1;if(o.school_year==s.school_year){if(o.school_group>s.school_group)return-1;if(o.school_group<s.school_group)return 1}return 0};c.sort(d);const h=o=>{o.preventDefault(),p(!0)},m=()=>{p(!1)},y=(o,s,u,f)=>{n({school_id:o,school_year:s,school_group:u,group_id:f}),i(!0)},b=()=>{i(!1)};return t("section",{className:"teacherOverview",children:[r(F,{first_name:l.employee.first_name}),t("div",{className:"page__title__wrapper",children:[r("h1",{className:"page__title",children:"Overzicht"}),r("button",{className:"addGroup__button",onClick:o=>h(o),children:"+ Nieuwe groep"})]}),G?r(j,{closeModel:m,school_id:l.employee.school_id,employee_id:l.employee.id}):null,r("section",{className:"groups__overview",children:l.groups.length===0?r("div",{className:"groups__overview__noGroups",children:r("p",{className:"groups__overview__noGroups__text",children:"Je hebt nog geen groepen, voeg er een toe!"})}):t("div",{className:"groups__overview__groups",children:[g?r(C,{closeModel:b,school_id:_.school_id,school_year:_.school_year,school_group:_.school_group,group_id:_.group_id}):null,c.map(o=>t("div",{className:"group__card",children:[t("div",{className:"group__card__header",children:[r("h2",{className:"group__card__title",children:o.school_group}),r("p",{className:"group__card__subtitle",children:o.school_year}),r("button",{className:"group__card__edit__button",onClick:()=>y(l.employee.school_id,o.school_year,o.school_group,o.id),children:r("span",{className:"material-symbols-outlined",children:"more_vert"})}),r("div",{className:"group__card__line"})]}),r("div",{className:"group__card__body",children:t("p",{className:"group__card__body__students__text",children:[o.student_count," ",o.student_count===1?"leerling":"leerlingen"]})}),r("div",{className:"group__card__footer",children:r(A,{method:"get",className:"group__card__footer__link button-primary",href:`/docent/overzicht/${o.id}`,as:"button",children:"Bekijk groep"})})]},o.id))]})})]})}export{H as default};
